<p align="center">
  <img src="https://img.shields.io/badge/言語-はじむ-ff6b6b?style=for-the-badge" alt="はじむ">
  <img src="https://img.shields.io/badge/Discord_API-v10-5865F2?style=for-the-badge&logo=discord&logoColor=white" alt="Discord API v10">
  <img src="https://img.shields.io/badge/license-MIT-green?style=for-the-badge" alt="MIT License">
  <img src="https://img.shields.io/badge/version-2.3.0-blue?style=for-the-badge" alt="v2.3.0">
  <img src="https://img.shields.io/badge/関数数-252-orange?style=for-the-badge" alt="252 functions">
</p>

# hajimu_discord — はじむ言語用 Discord Bot 開発プラグイン

**完全日本語 API で Discord Bot を開発。** discord.js や discord.py のように、はじむ言語でも直感的に Bot が書けます。

```
取り込む "hajimu_discord" として ボット

ボット.ボット作成("YOUR_TOKEN")
ボット.メッセージ受信時(関数(メッセージ)
    もし メッセージ["内容"] == "!ping" なら
        ボット.返信(メッセージ, "🏓 ポン！")
    終わり
終わり)
ボット.ボット起動()
```

**たった 8 行で動く Discord Bot。** 英語を一切知らなくても大丈夫です。

---

## 他フレームワークとの比較

| 機能 | hajimu_discord | discord.js | discord.py |
|---|---|---|---|
| 言語 | はじむ (日本語) | JavaScript | Python |
| 関数数 | **252** | 300+ | 200+ |
| Gateway / REST | v10 ✅ | v10 | v10 |
| スラッシュコマンド | ✅ | ✅ | ✅ |
| 埋め込み / ボタン / モーダル | ✅ | ✅ | ✅ |
| Auto Select (User/Role/Channel) | ✅ | ✅ | ✅ |
| ボイスチャンネル | ✅ | ✅ (@discordjs/voice) | ✅ (wavelink) |
| Components V2 | ✅ | ✅ | ✅ |
| シャーディング | ✅ | ✅ | ✅ |
| OAuth2 | ✅ | ✅ | ✅ |
| サウンドボード | ✅ | ✅ | ✅ |
| Gateway イベント | **40+ 種** | 40+ 種 | 40+ 種 |
| API言語 | **完全日本語** 🇯🇵 | 英語 | 英語 |
| 外部依存 | libcurl + OpenSSL | Node.js | Python 3.8+ |
| インストール | `hajimu パッケージ 追加` | `npm install` | `pip install` |

---

## 📑 目次

- [インストール](#-インストール)
- [クイックスタート](#-クイックスタート)
- [チュートリアル](#-チュートリアル)
- [API リファレンス](#-api-リファレンス)
- [イベント一覧](#-イベント一覧)
- [レシピ集](#-レシピ集)
- [FAQ](#-faq)
- [変更履歴](#-変更履歴)

---

## 📦 インストール

### パッケージマネージャでインストール（推奨）

はじむ内蔵のパッケージマネージャを使う方法が最も簡単です。

```bash
hajimu パッケージ 追加 ReoShiozawa/hajimu-discord
```

これだけで GitHub からダウンロード・配置まで自動で行われます。
プロジェクト内の `hajimu.json` に依存が記録されるので、チームでの共有も簡単:

```bash
# 別のメンバーが hajimu.json の依存を一括インストール
hajimu パッケージ インストール
```

### ソースからビルド

C 拡張をカスタマイズしたい場合や、開発に参加したい場合はソースから:

```bash
git clone https://github.com/ReoShiozawa/hajimu-discord.git
cd hajimu-discord
make
make install    # → ~/.hajimu/plugins/hajimu_discord/ にインストール
```

> **ビルド要件:** C コンパイラ (gcc / clang), libcurl, OpenSSL, zlib, pthread
> **ボイス機能:** libopus, libsodium, ffmpeg (MP3等)
> **macOS:** `brew install openssl curl opus libsodium ffmpeg`
> **Ubuntu:** `sudo apt install libcurl4-openssl-dev libssl-dev zlib1g-dev libopus-dev libsodium-dev ffmpeg`

### 手動配置

`hajimu_discord.hjp` と `hajimu.json` を以下のいずれかにコピー:

```
~/.hajimu/plugins/hajimu_discord/    ← グローバル（全プロジェクトで利用可能）
./hajimu_packages/hajimu_discord/    ← プロジェクトローカル
```

---

## 🚀 クイックスタート

### 1. Discord Developer Portal で Bot を作成

1. [Discord Developer Portal](https://discord.com/developers/applications) にアクセス
2. 「New Application」→ 名前を入力 → 作成
3. 左メニュー「Bot」→ 「Reset Token」→ **トークンをコピー**
4. 「Privileged Gateway Intents」で **Message Content Intent** を ON
5. 左メニュー「OAuth2」→ 「URL Generator」で `bot` + `applications.commands` を選択
6. 権限を選んで生成された URL でサーバーに招待

### 2. プロジェクトを作成

```bash
mkdir my-discord-bot && cd my-discord-bot
hajimu パッケージ 追加 ReoShiozawa/hajimu-discord
```

### 3. Bot ファイルを作成

`my_bot.jp` というファイルを作成:

```
取り込む "hajimu_discord" として ボット

ボット.ボット作成("ここにトークンを貼り付け")

ボット.メッセージ受信時(関数(メッセージ)
    もし メッセージ["著者"]["ボット"] == 真 なら
        返す
    終わり

    もし メッセージ["内容"] == "!hello" なら
        ボット.返信(メッセージ, "こんにちは！👋")
    終わり
終わり)

ボット.準備完了時(関数(名前)
    表示("✅ " + 名前 + " がオンラインになりました！")
終わり)

ボット.ボット起動()
```

### 4. 実行

```bash
hajimu my_bot.jp
```

Discord でサーバーに `!hello` と送ると、Bot が「こんにちは！👋」と返します 🎉

---

## 📖 チュートリアル

### Step 1: 最小の Bot

```
取り込む "hajimu_discord" として ボット

ボット.ボット作成("YOUR_TOKEN")
ボット.メッセージ受信時(関数(メッセージ)
    もし メッセージ["内容"] == "!ping" なら
        ボット.返信(メッセージ, "🏓 ポン！")
    終わり
終わり)
ボット.ボット起動()
```

### Step 2: 複数のコマンド

```
ボット.メッセージ受信時(関数(メッセージ)
    変数 著者 = メッセージ["著者"]
    もし 著者["ボット"] == 真 なら 返す 終わり

    変数 内容 = メッセージ["内容"]
    変数 チャンネル = メッセージ["チャンネルID"]

    もし 内容 == "!ping" なら
        ボット.返信(メッセージ, "🏓 ポン！")
    終わり

    もし 内容 == "!hello" なら
        ボット.返信(メッセージ, "こんにちは、" + 著者["ユーザー名"] + " さん！")
    終わり

    もし 内容 == "!time" なら
        ボット.メッセージ送信(チャンネル, "現在の時刻は... まだ実装してません 😅")
    終わり
終わり)
```

### Step 3: リッチな埋め込み (Embed)

```
変数 e = ボット.埋め込み作成()
ボット.埋め込みタイトル(e, "📘 お知らせ")
ボット.埋め込み説明(e, "新機能がリリースされました！")
ボット.埋め込み色(e, 0x5865F2)
ボット.埋め込みフィールド(e, "バージョン", "2.3.0", 真)
ボット.埋め込みフィールド(e, "変更点", "252関数に拡充！", 真)
ボット.埋め込みフッター(e, "はじむ Bot")
ボット.埋め込みタイムスタンプ(e)
ボット.埋め込み送信(チャンネルID, e)
```

### Step 4: スラッシュコマンド

```
// /greet コマンドを登録（Bot起動前に記述）
変数 cmd = ボット.コマンド登録("greet", "挨拶する", 関数(インタラクション)
    ボット.コマンド応答(インタラクション, "👋 こんにちは！")
終わり)

// オプション追加（省略可能な引数）
ボット.コマンドオプション(cmd, "文字列", "message", "カスタムメッセージ", 偽)
```

### Step 5: ステータス設定

```
ボット.準備完了時(関数(名前)
    ボット.ステータス設定("オンライン", "はじむ言語で動作中", "プレイ中")
終わり)
```

ステータスの種類:
| 日本語 | 英語 | 表示例 |
|---|---|---|
| `"プレイ中"` | PLAYING | ○○をプレイ中 |
| `"配信中"` | STREAMING | ○○を配信中 |
| `"再生中"` | LISTENING | ○○を再生中 |
| `"視聴中"` | WATCHING | ○○を視聴中 |
| `"競争中"` | COMPETING | ○○に参戦中 |

### Step 6: モデレーション

```
// キック
ボット.キック(サーバーID, ユーザーID)

// BAN
ボット.BAN(サーバーID, ユーザーID, "規約違反")

// BAN解除
ボット.BAN解除(サーバーID, ユーザーID)

// BAN一覧取得 (v2.3)
変数 一覧 = ボット.BAN一覧(サーバーID)

// 一括BAN (v2.3)
ボット.BAN一括(サーバーID, [ユーザーID1, ユーザーID2, ユーザーID3])

// ロール付与
ボット.ロール付与(サーバーID, ユーザーID, ロールID)

// メンバー編集 (v2.3)
ボット.メンバー編集(サーバーID, ユーザーID, "{\"nick\": \"新しい名前\"}")

// ニックネーム変更 (v2.3)
ボット.ニックネーム変更(サーバーID, "Bot新名前")
```

### Step 7: DM (ダイレクトメッセージ)

```
// DMチャンネルを作成
変数 dm = ボット.DM作成(ユーザーID)
// 送信
ボット.メッセージ送信(dm["ID"], "こっそりメッセージ 🤫")
```

### Step 8: ボタン付きメッセージ

```
// ボタンを作成
変数 はい = ボット.ボタン作成("はい ✅", "サクセス", "btn_yes")
変数 いいえ = ボット.ボタン作成("いいえ ❌", "デンジャー", "btn_no")

// アクション行にまとめる
変数 行 = ボット.アクション行作成()
ボット.行にボタン追加(行, はい)
ボット.行にボタン追加(行, いいえ)

// 送信
ボット.コンポーネント送信(チャンネルID, "参加しますか？", [行])

// ボタンクリック時の処理
ボット.ボタン時("btn_yes", 関数(インタラクション)
    ボット.インタラクション更新(インタラクション, "✅ 参加登録しました！")
終わり)

ボット.ボタン時("btn_no", 関数(インタラクション)
    ボット.インタラクション更新(インタラクション, "❌ キャンセルしました")
終わり)
```

### Step 9: セレクトメニュー（文字列 / ユーザー / ロール / チャンネル）

```
// 文字列セレクトメニュー
変数 メニュー = ボット.セレクトメニュー作成("color_select", "色を選んでください")
ボット.メニュー選択肢(メニュー, "赤", "red", "赤色")
ボット.メニュー選択肢(メニュー, "青", "blue", "青色")

// 自動選択メニュー (v2.3) — 選択肢は Discord が自動表示
変数 ユーザー選択 = ボット.ユーザーセレクト作成("user_select", "ユーザーを選択")
変数 ロール選択 = ボット.ロールセレクト作成("role_select", "ロールを選択")
変数 チャンネル選択 = ボット.チャンネルセレクト作成("ch_select", "チャンネルを選択")
変数 メンション選択 = ボット.メンション可能セレクト作成("mention_select", "メンション先を選択")

// アクション行にまとめて送信
変数 行 = ボット.アクション行作成()
ボット.行にメニュー追加(行, ユーザー選択)
ボット.コンポーネント送信(チャンネルID, "メンバーを選んでください", [行])
```

### Step 10: モーダル（フォーム）

```
// スラッシュコマンドからモーダルを表示
ボット.コマンド登録("feedback", "フィードバックを送る", 関数(インタラクション)
    変数 m = ボット.モーダル作成("fb_modal", "📝 フィードバック")
    ボット.テキスト入力追加(m, "タイトル", "fb_title", 1)
    ボット.テキスト入力追加(m, "内容", "fb_body", 2)
    ボット.モーダル表示(インタラクション, m)
終わり)

// モーダル送信時
ボット.モーダル送信時("fb_modal", 関数(インタラクション)
    変数 タイトル = インタラクション["データ"]["fb_title"]
    変数 内容 = インタラクション["データ"]["fb_body"]
    ボット.コマンド応答(インタラクション, "📬 受け取りました: " + タイトル, 真)
終わり)
```

### Step 11: サブコマンド

```
// /music play, /music stop のようなサブコマンド
ボット.コマンド登録("music", "音楽コマンド", 偽)

ボット.サブコマンド追加("music", "play", "再生する", 関数(インタラクション)
    ボット.コマンド応答(インタラクション, "🎵 再生開始！")
終わり)

ボット.サブコマンド追加("music", "stop", "停止する", 関数(インタラクション)
    ボット.コマンド応答(インタラクション, "⏹ 停止しました")
終わり)
```

### Step 12: チャンネル & スレッド管理

```
// チャンネル作成
ボット.チャンネル作成(サーバーID, "一般チャット", "テキスト")
ボット.チャンネル作成(サーバーID, "雑談", "ボイス")

// スレッド
ボット.スレッド作成(チャンネルID, "質問スレッド")
ボット.スレッドアーカイブ(スレッドID, 真)       // アーカイブ (v2.3)
ボット.スレッドロック(スレッドID, 真)            // ロック (v2.3)

// スレッド一覧 (v2.3)
変数 アクティブ = ボット.アクティブスレッド一覧(サーバーID)
変数 アーカイブ = ボット.アーカイブスレッド一覧(チャンネルID, "public")

// アナウンスチャンネル (v2.3)
ボット.クロスポスト(チャンネルID, メッセージID)     // 他サーバーに配信
ボット.チャンネルフォロー(ソースID, ターゲットID)    // チャンネルフォロー

// 権限
ボット.権限設定(チャンネルID, ロールID, 許可ビット, 拒否ビット)
```

### Step 13: Webhook

```
// Webhook 作成・送信
変数 wh = ボット.Webhook作成(チャンネルID, "通知Bot")
ボット.Webhook送信(WebhookURL, "GitHub から通知が届きました", "GitHub Bot", "https://...")

// Webhook 情報取得・編集 (v2.3)
変数 情報 = ボット.Webhook情報(WebhookID)
ボット.Webhook編集(WebhookID, "{\"name\": \"新しい名前\"}")

// ファイル添付送信
ボット.ファイル送信(チャンネルID, "/path/to/image.png", "スクリーンショットです")
```

### Step 14: コレクター

```
// メッセージ収集（30秒、最大5件）
変数 収集結果 = ボット.メッセージ収集(チャンネルID, 偽, 30, 5)
表示("収集したメッセージ数: " + 長さ(収集結果))

// リアクション収集（60秒間）
変数 リアクション = ボット.リアクション収集(チャンネルID, メッセージID, 60, 10)

// リアクションユーザー一覧 (v2.3)
変数 ユーザー = ボット.リアクションユーザー一覧(チャンネルID, メッセージID, "👍", 100)
```

### Step 15: ボイスチャンネル

```
ボット.VC接続(サーバーID, ボイスチャンネルID)

ボット.イベント("ボイス接続完了", 関数(ギルドID):
    ボット.音声再生(ギルドID, "/path/to/music.mp3")
)

ボット.音声一時停止(サーバーID)
ボット.音声再開(サーバーID)
ボット.音声スキップ(サーバーID)
ボット.音声ループ(サーバーID, 真)
ボット.VC切断(サーバーID)
```

### Step 16: サーバー管理拡張 <sup>v2.3</sup>

```
// プルーン（非アクティブメンバー削除）
変数 対象 = ボット.プルーン確認(サーバーID, 7)     // 7日間非アクティブの人数
ボット.プルーン実行(サーバーID, 7)                  // 実行

// サーバープレビュー・ウィジェット
変数 プレビュー = ボット.サーバープレビュー(サーバーID)
変数 ウィジェット = ボット.ウィジェット設定取得(サーバーID)
変数 URL = ボット.バニティURL取得(サーバーID)

// チャンネル・ロール並べ替え
ボット.チャンネル位置変更(サーバーID, "[{\"id\":\"123\",\"position\":0}]")
ボット.ロール位置変更(サーバーID, "[{\"id\":\"456\",\"position\":1}]")
```

### Step 17: コマンド管理 <sup>v2.3</sup>

```
// 登録済みコマンド一覧
変数 コマンド一覧 = ボット.コマンド一覧()              // グローバル
変数 サーバーコマンド = ボット.コマンド一覧(サーバーID)  // サーバー限定

// コマンド削除
ボット.コマンド削除(コマンドID)
ボット.コマンド削除(コマンドID, サーバーID)    // サーバーコマンド削除

// コマンド権限設定
ボット.コマンド権限設定(サーバーID, コマンドID, 権限JSON)
```

### Step 18: ユーティリティ <sup>v2.3</sup>

```
// Snowflake → タイムスタンプ変換
変数 時刻 = ボット.Snowflakeタイムスタンプ("1234567890123456789")
表示(時刻)  // Unix timestamp (ms)

// 権限計算（日本語・英語両対応）
変数 v1 = ボット.権限値("管理者")            // → 8
変数 v2 = ボット.権限値("ADMINISTRATOR")      // → 8
変数 v3 = ボット.権限値("メッセージ送信")    // → 2048

// 権限チェック
ボット.権限チェック(ユーザー権限値, ボット.権限値("メッセージ管理"))  // → 真/偽

// アプリ情報・Voice地域
変数 アプリ = ボット.アプリ情報()
変数 地域 = ボット.Voice地域一覧()
```

### Step 19: Components V2

```
変数 テキスト = ボット.テキスト表示(1, "📢 お知らせ")
変数 区切り = ボット.セパレーター(2, 真, 真)
変数 本文 = ボット.テキスト表示(3, "新バージョンがリリースされました！")
変数 コンテナ = ボット.コンテナ(4, [テキスト, 区切り, 本文], 0x5865F2)
ボット.V2メッセージ送信(チャンネルID, [コンテナ])
```

### Step 20: シャーディング

```
// 大規模Bot向けシャーディング設定
変数 情報 = ボット.シャード情報()   // 推奨シャード数を取得

ボット.シャード設定(0, 4)           // シャードID 0 として起動（4シャード中）
ボット.ボット作成("TOKEN")
ボット.ボット起動()
```

---

## 📚 API リファレンス

### ボット管理

| 関数 | 引数 | 説明 |
|---|---|---|
| `ボット作成(トークン)` | 文字列 | Bot を初期化 |
| `ボット起動()` | — | Gateway に接続してイベントループ開始 |
| `ボット停止()` | — | Bot を停止 |
| `インテント設定(...)` | 文字列/数値(可変長) | Gateway Intents を設定 |
| `バージョン()` | — | プラグインバージョンを返す |

### イベント

| 関数 | 引数 | 説明 |
|---|---|---|
| `イベント(名前, コールバック)` | 文字列, 関数 | 任意のイベントを登録 |
| `準備完了時(コールバック)` | 関数 | Bot 接続完了時 |
| `メッセージ受信時(コールバック)` | 関数 | メッセージ受信時 |
| `コマンド受信時(コールバック)` | 関数 | スラッシュコマンド受信時 |
| `参加時(コールバック)` | 関数 | メンバー参加時 |
| `退出時(コールバック)` | 関数 | メンバー退出時 |
| `リアクション時(コールバック)` | 関数 | リアクション追加時 |
| `エラー時(コールバック)` | 関数 | エラー発生時 |
| `切断時(コールバック)` | 関数 | Gateway 切断時 |
| `再接続時(コールバック)` | 関数 | Gateway 再接続時 |

### メッセージ

| 関数 | 引数 | 説明 |
|---|---|---|
| `メッセージ送信(チャンネルID, 内容)` | 文字列, 文字列 | メッセージを送信 |
| `返信(メッセージ, 内容)` | 辞書, 文字列 | メッセージに返信 |
| `メッセージ編集(チャンネルID, メッセージID, 内容)` | 文字列×3 | メッセージを編集 |
| `メッセージ削除(チャンネルID, メッセージID)` | 文字列×2 | メッセージを削除 |
| `一括削除(チャンネルID, ID配列)` | 文字列, 配列 | メッセージを一括削除 |
| `メッセージ取得(チャンネルID, メッセージID)` | 文字列×2 | メッセージを取得 |
| `メッセージ履歴(チャンネルID, 件数)` | 文字列, 数値 | 直近N件のメッセージ取得 |
| `メッセージ一括削除(チャンネルID, 件数)` | 文字列, 数値 | 直近N件を取得して一括削除 |
| `ピン留め(チャンネルID, メッセージID)` | 文字列×2 | メッセージをピン留め |
| `ピン解除(チャンネルID, メッセージID)` | 文字列×2 | ピン留めを解除 |
| `ピン一覧(チャンネルID)` | 文字列 | ピン留めメッセージ一覧を取得 |

### 埋め込み (Embed)

| 関数 | 引数 | 説明 |
|---|---|---|
| `埋め込み作成()` | — | 新しい埋め込みを作成 |
| `埋め込みタイトル(e, テキスト)` | 数値, 文字列 | タイトルを設定 |
| `埋め込み説明(e, テキスト)` | 数値, 文字列 | 説明を設定 |
| `埋め込み色(e, 色)` | 数値, 数値 | 色を設定 (0xRRGGBB) |
| `埋め込みフィールド(e, 名前, 値[, インライン])` | 数値, 文字列, 文字列[, 真偽] | フィールドを追加 |
| `埋め込みフッター(e, テキスト[, アイコンURL])` | 数値, 文字列[, 文字列] | フッターを設定 |
| `埋め込みサムネイル(e, URL)` | 数値, 文字列 | サムネイルを設定 |
| `埋め込み画像(e, URL)` | 数値, 文字列 | 画像を設定 |
| `埋め込み著者(e, 名前[, アイコン, URL])` | 数値, 文字列[, 文字列, 文字列] | 著者を設定 |
| `埋め込みタイムスタンプ(e)` | 数値 | 現在時刻を設定 |
| `埋め込み送信(チャンネルID, e[, テキスト])` | 文字列, 数値[, 文字列] | 埋め込みを送信 |

### スラッシュコマンド

| 関数 | 引数 | 説明 |
|---|---|---|
| `コマンド登録(名前, 説明, コールバック)` | 文字列, 文字列, 関数 | コマンドを登録 |
| `コマンドオプション(ID, 型, 名前, 説明[, 必須])` | 数値, 文字列, 文字列, 文字列[, 真偽] | オプションを追加 |
| `コマンド応答(インタラクション, 内容[, エフェメラル])` | 辞書, 文字列[, 真偽] | コマンドに応答 |
| `コマンド遅延応答(インタラクション)` | 辞書 | 「考え中...」表示 |
| `コマンドフォローアップ(インタラクション, 内容)` | 辞書, 文字列 | 遅延後にフォローアップ |
| `コマンド選択肢(オプション, 名前, 値)` | 数値, 文字列, 文字列 | オプションに選択肢を追加 |
| `コマンド一覧([サーバーID])` | [文字列] | 登録済みコマンド一覧 <sup>v2.3</sup> |
| `コマンド削除(コマンドID[, サーバーID])` | 文字列[, 文字列] | コマンドを削除 <sup>v2.3</sup> |
| `コマンド権限設定(サーバーID, コマンドID, 権限)` | 文字列×3 | コマンド権限を設定 <sup>v2.3</sup> |

**オプションの型:**

| 日本語 | 英語 | Discord Type |
|---|---|---|
| `"文字列"` | STRING | 3 |
| `"整数"` | INTEGER | 4 |
| `"真偽値"` | BOOLEAN | 5 |
| `"ユーザー"` | USER | 6 |
| `"チャンネル"` | CHANNEL | 7 |
| `"ロール"` | ROLE | 8 |
| `"数値"` | NUMBER | 10 |

### サブコマンド

| 関数 | 引数 | 説明 |
|---|---|---|
| `サブコマンド追加(コマンド名, サブ名, 説明, 関数)` | 文字列×3, 関数 | サブコマンドを登録 |
| `サブコマンドグループ追加(コマンド名, グループ名, 説明)` | 文字列×3 | サブコマンドグループを追加 |

### コンテキストメニュー

| 関数 | 引数 | 説明 |
|---|---|---|
| `ユーザーメニュー登録(名前, 関数)` | 文字列, 関数 | 右クリック→ユーザーメニュー |
| `メッセージメニュー登録(名前, 関数)` | 文字列, 関数 | 右クリック→メッセージメニュー |

### オートコンプリート

| 関数 | 引数 | 説明 |
|---|---|---|
| `オートコンプリート時(コマンド名, 関数)` | 文字列, 関数 | オートコンプリートハンドラを登録 |
| `オートコンプリート応答(インタラクション, 選択肢配列)` | 辞書, 配列 | 候補を返す（最大25件） |

### コンポーネント（ボタン・セレクトメニュー）

| 関数 | 引数 | 説明 |
|---|---|---|
| `ボタン作成(ラベル, スタイル, カスタムID)` | 文字列, 数値/文字列, 文字列 | ボタンを作成 |
| `リンクボタン作成(ラベル, URL)` | 文字列×2 | リンクボタンを作成 |
| `ボタン無効化(ボタン, 真偽)` | 数値, 真偽 | ボタンの有効/無効を切替 |
| `アクション行作成()` | — | アクション行を作成 |
| `行にボタン追加(行, ボタン)` | 数値, 数値 | 行にボタンを追加 |
| `行にメニュー追加(行, メニュー)` | 数値, 数値 | 行にセレクトメニューを追加 |
| `コンポーネント送信(チャンネルID, テキスト, 行配列)` | 文字列, 文字列, 配列 | コンポーネント付きメッセージ送信 |
| `セレクトメニュー作成(カスタムID, プレースホルダー)` | 文字列×2 | 文字列セレクトメニューを作成 |
| `メニュー選択肢(メニュー, ラベル, 値, 説明)` | 数値, 文字列×3 | メニューに選択肢を追加 |
| `ユーザーセレクト作成(カスタムID[, プレースホルダー])` | 文字列×1-2 | ユーザー自動選択メニュー <sup>v2.3</sup> |
| `ロールセレクト作成(カスタムID[, プレースホルダー])` | 文字列×1-2 | ロール自動選択メニュー <sup>v2.3</sup> |
| `チャンネルセレクト作成(カスタムID[, プレースホルダー])` | 文字列×1-2 | チャンネル自動選択メニュー <sup>v2.3</sup> |
| `メンション可能セレクト作成(カスタムID[, プレースホルダー])` | 文字列×1-2 | メンション可能自動選択メニュー <sup>v2.3</sup> |
| `ボタン時(カスタムID, 関数)` | 文字列, 関数 | ボタンクリック時のハンドラ |
| `セレクト時(カスタムID, 関数)` | 文字列, 関数 | セレクトメニュー選択時のハンドラ |
| `インタラクション更新(インタラクション, 内容)` | 辞書, 文字列 | メッセージを更新して応答 |
| `インタラクション遅延更新(インタラクション)` | 辞書 | 遅延更新応答 |

**ボタンスタイル:**

| 日本語 / 値 | 外観 |
|---|---|
| `"プライマリ"` / `1` | 🔵 青 |
| `"セカンダリ"` / `2` | ⚪ 灰 |
| `"サクセス"` / `3` | 🟢 緑 |
| `"デンジャー"` / `4` | 🔴 赤 |
| `"リンク"` / `5` | 🔗 リンク |

### モーダル

| 関数 | 引数 | 説明 |
|---|---|---|
| `モーダル作成(カスタムID, タイトル)` | 文字列×2 | モーダル（フォーム）を作成 |
| `テキスト入力追加(モーダル, ラベル, カスタムID, スタイル)` | 数値, 文字列×2, 数値 | テキスト入力フィールドを追加 |
| `モーダル表示(インタラクション, モーダル)` | 辞書, 数値 | モーダルを表示 |
| `モーダル送信時(カスタムID, 関数)` | 文字列, 関数 | モーダル送信時のハンドラ |

### チャンネル・サーバー

| 関数 | 引数 | 説明 |
|---|---|---|
| `チャンネル情報(ID)` | 文字列 | チャンネル情報を取得 |
| `チャンネル一覧(サーバーID)` | 文字列 | チャンネル一覧を取得 |
| `タイピング表示(チャンネルID)` | 文字列 | 「入力中...」を表示 |
| `チャンネル作成(サーバーID, 名前, 種類[, 親ID])` | 文字列×3[, 文字列] | チャンネルを作成 |
| `チャンネル編集(チャンネルID, 設定)` | 文字列, 辞書 | チャンネル設定を変更 |
| `チャンネル削除(チャンネルID)` | 文字列 | チャンネルを削除 |
| `チャンネル位置変更(サーバーID, 変更JSON)` | 文字列×2 | チャンネルの並び順を変更 <sup>v2.3</sup> |
| `サーバー情報(ID)` | 文字列 | サーバー情報を取得 |
| `メンバー情報(サーバーID, ユーザーID)` | 文字列×2 | メンバー情報を取得 |
| `クロスポスト(チャンネルID, メッセージID)` | 文字列×2 | アナウンスメッセージを配信 <sup>v2.3</sup> |
| `チャンネルフォロー(ソースID, ターゲットID)` | 文字列×2 | アナウンスチャンネルをフォロー <sup>v2.3</sup> |

### スレッド

| 関数 | 引数 | 説明 |
|---|---|---|
| `スレッド作成(チャンネルID, 名前[, アーカイブ分])` | 文字列×2[, 数値] | スレッドを作成 |
| `スレッド参加(スレッドID)` | 文字列 | スレッドに参加 |
| `スレッド退出(スレッドID)` | 文字列 | スレッドから退出 |
| `スレッドメンバー追加(スレッドID, ユーザーID)` | 文字列×2 | メンバーをスレッドに追加 |
| `スレッドメンバー削除(スレッドID, ユーザーID)` | 文字列×2 | メンバーをスレッドから削除 |
| `アクティブスレッド一覧(サーバーID)` | 文字列 | アクティブスレッド一覧 <sup>v2.3</sup> |
| `アーカイブスレッド一覧(チャンネルID[, 種別])` | 文字列[, 文字列] | アーカイブスレッド一覧 <sup>v2.3</sup> |
| `スレッドアーカイブ(スレッドID, 真偽)` | 文字列, 真偽 | アーカイブ/解除 <sup>v2.3</sup> |
| `スレッドロック(スレッドID, 真偽)` | 文字列, 真偽 | ロック/解除 <sup>v2.3</sup> |
| `スレッドピン(スレッドID, 真偽)` | 文字列, 真偽 | ピン留め/解除 <sup>v2.3</sup> |

### 権限

| 関数 | 引数 | 説明 |
|---|---|---|
| `権限設定(チャンネルID, 対象ID, 許可, 拒否[, 種類])` | 文字列×2, 数値×2[, 数値] | 権限オーバーライド |

### 招待

| 関数 | 引数 | 説明 |
|---|---|---|
| `招待作成(チャンネルID[, 設定])` | 文字列[, 辞書] | 招待を作成 |
| `招待一覧(サーバーID)` | 文字列 | サーバーの招待一覧 |
| `招待削除(招待コード)` | 文字列 | 招待を削除 |
| `招待情報(招待コード)` | 文字列 | 招待情報を取得 |

### Webhook

| 関数 | 引数 | 説明 |
|---|---|---|
| `Webhook作成(チャンネルID, 名前)` | 文字列×2 | Webhookを作成 |
| `Webhook一覧(チャンネルID)` | 文字列 | チャンネルのWebhook一覧 |
| `Webhook削除(WebhookID)` | 文字列 | Webhookを削除 |
| `Webhook送信(URL, 内容[, 名前, アバターURL])` | 文字列×2[, 文字列×2] | Webhookでメッセージ送信 |
| `Webhook編集(WebhookID, 設定JSON)` | 文字列×2 | Webhookを編集 <sup>v2.3</sup> |
| `Webhook情報(WebhookID)` | 文字列 | Webhook情報を取得 <sup>v2.3</sup> |
| `Webhookメッセージ編集(WebhookID, トークン, メッセージID, 内容)` | 文字列×4 | Webhookメッセージ編集 <sup>v2.3</sup> |
| `Webhookメッセージ削除(WebhookID, トークン, メッセージID)` | 文字列×3 | Webhookメッセージ削除 <sup>v2.3</sup> |

### ファイル添付

| 関数 | 引数 | 説明 |
|---|---|---|
| `ファイル送信(チャンネルID, ファイルパス[, コメント])` | 文字列×2[, 文字列] | ファイルを添付して送信 |

### コレクター

| 関数 | 引数 | 説明 |
|---|---|---|
| `メッセージ収集(チャンネルID, フィルタ, タイムアウト秒[, 最大件数])` | 文字列, 値, 数値[, 数値] | メッセージを収集 |
| `リアクション収集(チャンネルID, メッセージID, タイムアウト秒[, 最大件数])` | 文字列×2, 数値[, 数値] | リアクションを収集 |
| `インタラクション収集(チャンネルID, メッセージID, タイムアウト秒[, 最大件数])` | 文字列×2, 数値[, 数値] | コンポーネントインタラクションを収集 |

### メンバー・サーバー一覧

| 関数 | 引数 | 説明 |
|---|---|---|
| `メンバー一覧(サーバーID[, 件数])` | 文字列[, 数値] | メンバー一覧を取得 |
| `メンバー検索(サーバーID, クエリ[, 件数])` | 文字列, 文字列[, 数値] | メンバーをユーザー名で検索 |
| `サーバー一覧()` | — | Botが参加中のサーバー一覧 |

### モデレーション

| 関数 | 引数 | 説明 |
|---|---|---|
| `キック(サーバーID, ユーザーID[, 理由])` | 文字列×2-3 | メンバーをキック |
| `BAN(サーバーID, ユーザーID[, 理由])` | 文字列×2-3 | メンバーをBAN |
| `BAN解除(サーバーID, ユーザーID)` | 文字列×2 | BANを解除 |
| `BAN一覧(サーバーID[, 上限])` | 文字列[, 数値] | BAN一覧を取得 <sup>v2.3</sup> |
| `BAN一括(サーバーID, ユーザーID配列[, 削除秒数])` | 文字列, 配列[, 数値] | 一括BAN <sup>v2.3</sup> |
| `タイムアウト(サーバーID, ユーザーID, 秒数)` | 文字列×2, 数値 | メンバーをタイムアウト |
| `メンバー編集(サーバーID, ユーザーID, 設定JSON)` | 文字列×3 | メンバー設定を変更 <sup>v2.3</sup> |
| `ニックネーム変更(サーバーID, ニックネーム)` | 文字列×2 | Bot自身のニックネーム変更 <sup>v2.3</sup> |
| `ロール付与(サーバーID, ユーザーID, ロールID)` | 文字列×3 | ロールを付与 |
| `ロール剥奪(サーバーID, ユーザーID, ロールID)` | 文字列×3 | ロールを剥奪 |
| `ロール一覧(サーバーID)` | 文字列 | ロール一覧を取得 |
| `ロール位置変更(サーバーID, 変更JSON)` | 文字列×2 | ロールの並び順を変更 <sup>v2.3</sup> |

### リアクション

| 関数 | 引数 | 説明 |
|---|---|---|
| `リアクション追加(チャンネルID, メッセージID, 絵文字)` | 文字列×3 | リアクションを追加 |
| `リアクション削除(チャンネルID, メッセージID, 絵文字[, ユーザーID])` | 文字列×3-4 | リアクションを削除 |
| `リアクション全削除(チャンネルID, メッセージID)` | 文字列×2 | 全リアクションを削除 |
| `リアクションユーザー一覧(チャンネルID, メッセージID, 絵文字[, 上限])` | 文字列×3[, 数値] | リアクションしたユーザー一覧 <sup>v2.3</sup> |
| `絵文字リアクション削除(チャンネルID, メッセージID, 絵文字)` | 文字列×3 | 特定絵文字の全リアクション削除 <sup>v2.3</sup> |

### サーバー管理

| 関数 | 引数 | 説明 |
|---|---|---|
| `サーバー編集(サーバーID, 設定)` | 文字列×2 | サーバー設定を変更 |
| `サーバー削除(サーバーID)` | 文字列 | サーバーを削除（Bot=オーナー時） <sup>v2.3</sup> |
| `サーバープレビュー(サーバーID)` | 文字列 | サーバープレビュー情報 <sup>v2.3</sup> |
| `プルーン確認(サーバーID[, 日数])` | 文字列[, 数値] | プルーン対象人数を確認 <sup>v2.3</sup> |
| `プルーン実行(サーバーID[, 日数])` | 文字列[, 数値] | メンバープルーンを実行 <sup>v2.3</sup> |
| `ウィジェット設定取得(サーバーID)` | 文字列 | ウィジェット設定を取得 <sup>v2.3</sup> |
| `ウィジェット設定更新(サーバーID, 設定JSON)` | 文字列×2 | ウィジェット設定を更新 <sup>v2.3</sup> |
| `バニティURL取得(サーバーID)` | 文字列 | バニティURL情報を取得 <sup>v2.3</sup> |
| `ロール作成(サーバーID, 名前[, 色, 権限])` | 文字列×2[, 数値, 文字列] | ロールを作成 |
| `ロール編集(サーバーID, ロールID, 設定)` | 文字列×3 | ロールを編集 |
| `ロール削除(サーバーID, ロールID)` | 文字列×2 | ロールを削除 |

### 監査ログ

| 関数 | 引数 | 説明 |
|---|---|---|
| `監査ログ(サーバーID[, 種類, 件数])` | 文字列[, 数値, 数値] | 監査ログを取得 |

### AutoModeration

| 関数 | 引数 | 説明 |
|---|---|---|
| `AutoModルール一覧(サーバーID)` | 文字列 | ルール一覧を取得 |
| `AutoModルール取得(サーバーID, ルールID)` | 文字列×2 | ルール詳細を取得 |
| `AutoModルール作成(サーバーID, 設定)` | 文字列, 辞書 | ルールを作成 |
| `AutoModルール編集(サーバーID, ルールID, 設定)` | 文字列×3 | ルールを編集 |
| `AutoModルール削除(サーバーID, ルールID)` | 文字列×2 | ルールを削除 |
| `AutoMod実行時(コールバック)` | 関数 | AutoMod実行時イベント |

### 絵文字

| 関数 | 引数 | 説明 |
|---|---|---|
| `絵文字一覧(サーバーID)` | 文字列 | 絵文字一覧を取得 |
| `絵文字作成(サーバーID, 名前, 画像パス)` | 文字列×3 | カスタム絵文字を作成 |
| `絵文字削除(サーバーID, 絵文字ID)` | 文字列×2 | 絵文字を削除 |

### スケジュールイベント

| 関数 | 引数 | 説明 |
|---|---|---|
| `イベント作成(サーバーID, 名前, 開始, 終了[, 説明])` | 文字列×4[, 文字列] | スケジュールイベント作成 |
| `イベント編集(サーバーID, イベントID, 設定)` | 文字列×3 | イベントを編集 |
| `イベント削除(サーバーID, イベントID)` | 文字列×2 | イベントを削除 |
| `イベント一覧(サーバーID)` | 文字列 | イベント一覧を取得 |

### 投票 (Poll)

| 関数 | 引数 | 説明 |
|---|---|---|
| `投票作成(チャンネルID, 質問, 選択肢配列, 時間h[, 複数選択])` | 文字列, 文字列, 配列, 数値[, 真偽] | 投票を作成 |
| `投票終了(チャンネルID, メッセージID)` | 文字列×2 | 投票を即時終了 |

### ボイスチャンネル

| 関数 | 引数 | 説明 |
|---|---|---|
| `VC接続(サーバーID, チャンネルID)` | 文字列×2 | ボイスチャンネルに参加 |
| `VC切断(サーバーID)` | 文字列 | ボイスチャンネルから退出 |
| `音声再生(サーバーID, ソース)` | 文字列×2 | 音声ファイルを再生 |
| `音声停止(サーバーID)` | 文字列 | 再生停止＆キュークリア |
| `音声一時停止(サーバーID)` | 文字列 | 再生を一時停止 |
| `音声再開(サーバーID)` | 文字列 | 一時停止から再開 |
| `音声スキップ(サーバーID)` | 文字列 | 現在の曲をスキップ |
| `音声キュー(サーバーID)` | 文字列 | キュー内の曲一覧を取得 |
| `音声ループ(サーバーID, 有効)` | 文字列, 真偽 | ループ再生モード切替 |
| `VC状態(サーバーID)` | 文字列 | 接続状態・再生情報を取得 |
| `音声音量(サーバーID, 音量)` | 文字列, 数値 | 音量調整（1-200%） |
| `Voice地域一覧()` | — | 利用可能なVoice地域一覧 <sup>v2.3</sup> |

> **依存**: `libopus`, `libsodium`, `ffmpeg`（MP3等の非WAVファイル再生時）

### ステージチャンネル

| 関数 | 引数 | 説明 |
|---|---|---|
| `ステージ開始(チャンネルID, トピック[, 公開])` | 文字列×2[, 真偽] | ステージインスタンスを作成 |
| `ステージ編集(チャンネルID, トピック)` | 文字列×2 | トピックを変更 |
| `ステージ終了(チャンネルID)` | 文字列 | ステージインスタンスを終了 |
| `ステージ情報(チャンネルID)` | 文字列 | ステージ情報を取得 |

### スタンプ管理

| 関数 | 引数 | 説明 |
|---|---|---|
| `スタンプ一覧(サーバーID)` | 文字列 | サーバーのスタンプ一覧 |
| `スタンプ取得(サーバーID, スタンプID)` | 文字列×2 | スタンプ詳細を取得 |
| `スタンプ作成(サーバーID, 名前, ファイル[, 説明, タグ])` | 文字列×3-5 | スタンプを作成 |
| `スタンプ編集(サーバーID, スタンプID, 設定)` | 文字列×3 | スタンプを編集 |
| `スタンプ削除(サーバーID, スタンプID)` | 文字列×2 | スタンプを削除 |
| `ステッカーパック一覧()` | — | Discordスタンプパック一覧 <sup>v2.3</sup> |

### ウェルカム画面

| 関数 | 引数 | 説明 |
|---|---|---|
| `ウェルカム画面取得(サーバーID)` | 文字列 | ウェルカム画面情報を取得 |
| `ウェルカム画面編集(サーバーID, 設定)` | 文字列×2 | ウェルカム画面を編集 |

### フォーラムチャンネル

| 関数 | 引数 | 説明 |
|---|---|---|
| `フォーラム投稿(チャンネルID, タイトル, 内容[, タグ])` | 文字列×3[, 配列] | フォーラムスレッドを作成 |
| `フォーラムタグ一覧(チャンネルID)` | 文字列 | フォーラムのタグ一覧 |

### Markdownユーティリティ

| 関数 | 引数 | 説明 |
|---|---|---|
| `太字(テキスト)` | 文字列 | `**テキスト**` |
| `斜体(テキスト)` | 文字列 | `*テキスト*` |
| `下線(テキスト)` | 文字列 | `__テキスト__` |
| `取り消し線(テキスト)` | 文字列 | `~~テキスト~~` |
| `コード(テキスト)` | 文字列 | `` `テキスト` `` |
| `コードブロック(テキスト[, 言語])` | 文字列×1-2 | コードブロック |
| `引用(テキスト)` | 文字列 | `> テキスト` |
| `スポイラー(テキスト)` | 文字列 | `\|\|テキスト\|\|` |
| `ユーザーメンション(ID)` | 文字列 | `<@ID>` |
| `チャンネルメンション(ID)` | 文字列 | `<#ID>` |
| `ロールメンション(ID)` | 文字列 | `<@&ID>` |
| `タイムスタンプ(UNIX秒[, スタイル])` | 数値[, 文字列] | `<t:unix:style>` |
| `カスタム絵文字(名前, ID[, アニメ])` | 文字列×2[, 真偽] | `<:名前:ID>` |
| `リンク(テキスト, URL)` | 文字列×2 | `[テキスト](URL)` |
| `見出し(テキスト, レベル)` | 文字列, 数値 | `# テキスト` (1-3) |
| `リスト(配列[, 番号付き])` | 配列[, 真偽] | Markdownリストを生成 |

### Components V2

| 関数 | 引数 | 説明 |
|---|---|---|
| `テキスト表示(ID, テキスト)` | 数値, 文字列 | TextDisplay コンポーネント |
| `セパレーター(ID[, 余白, 区切り線])` | 数値[, 真偽×2] | Separator コンポーネント |
| `メディアギャラリー(ID, アイテム配列)` | 数値, 配列 | MediaGallery コンポーネント |
| `メディアアイテム(URL[, 説明])` | 文字列×1-2 | MediaGalleryItem |
| `サムネイル(ID, URL[, 説明])` | 数値, 文字列×1-2 | Thumbnail コンポーネント |
| `セクション(ID, コンポーネント配列[, サムネイル])` | 数値, 配列[, 文字列] | Section コンポーネント |
| `コンテナ(ID, コンポーネント配列[, 色, スポイラー])` | 数値, 配列[, 数値, 真偽] | Container コンポーネント |
| `ファイル表示(ID, URL)` | 数値, 文字列 | File コンポーネント |
| `V2メッセージ送信(チャンネルID, コンポーネント配列)` | 文字列, 配列 | Components V2 メッセージ送信 |

### サーバーテンプレート

| 関数 | 引数 | 説明 |
|---|---|---|
| `テンプレート一覧(サーバーID)` | 文字列 | テンプレート一覧 |
| `テンプレート取得(コード)` | 文字列 | テンプレート情報を取得 |
| `テンプレート作成(サーバーID, 名前[, 説明])` | 文字列×2-3 | テンプレートを作成 |
| `テンプレート同期(サーバーID, コード)` | 文字列×2 | テンプレートを同期 |
| `テンプレート編集(サーバーID, コード, 設定)` | 文字列×3 | テンプレートを編集 |
| `テンプレート削除(サーバーID, コード)` | 文字列×2 | テンプレートを削除 |
| `テンプレートからサーバー作成(コード, 名前)` | 文字列×2 | テンプレートから新サーバー |

### オンボーディング

| 関数 | 引数 | 説明 |
|---|---|---|
| `オンボーディング取得(サーバーID)` | 文字列 | オンボーディング設定を取得 |
| `オンボーディング設定(サーバーID, 設定)` | 文字列×2 | オンボーディングを設定 |

### サウンドボード

| 関数 | 引数 | 説明 |
|---|---|---|
| `サウンドボード一覧(サーバーID)` | 文字列 | サーバーのサウンド一覧 |
| `サウンドボード取得(サーバーID, サウンドID)` | 文字列×2 | サウンド情報を取得 |
| `サウンドボード作成(サーバーID, 名前, データ[, 音量, 絵文字ID])` | 文字列×3[, 数値, 文字列] | サウンドを作成 |
| `サウンドボード編集(サーバーID, サウンドID, 設定)` | 文字列×3 | サウンドを編集 |
| `サウンドボード削除(サーバーID, サウンドID)` | 文字列×2 | サウンドを削除 |
| `サウンドボード再生(チャンネルID, サウンドID[, ソースID])` | 文字列×2-3 | サウンドを再生 |
| `デフォルトサウンドボード一覧()` | — | Discord標準サウンド一覧 |

### ロール接続メタデータ

| 関数 | 引数 | 説明 |
|---|---|---|
| `ロール接続メタデータ取得(アプリID)` | 文字列 | メタデータスキーマを取得 |
| `ロール接続メタデータ設定(アプリID, JSON)` | 文字列×2 | メタデータスキーマを設定 |
| `ユーザーロール接続取得(アプリID)` | 文字列 | ユーザーのロール接続を取得 |
| `ユーザーロール接続更新(アプリID, 設定)` | 文字列×2 | ユーザーのロール接続を更新 |

### エンタイトルメント / SKU

| 関数 | 引数 | 説明 |
|---|---|---|
| `SKU一覧(アプリID)` | 文字列 | アプリのSKU一覧 |
| `エンタイトルメント一覧(アプリID)` | 文字列 | エンタイトルメント一覧 |
| `エンタイトルメント消費(アプリID, ID)` | 文字列×2 | 消耗型エンタイトルメントを消費 |
| `テストエンタイトルメント作成(アプリID, SKU, Owner, Type)` | 文字列×3, 数値 | テスト用作成 |
| `テストエンタイトルメント削除(アプリID, ID)` | 文字列×2 | テスト用削除 |

### OAuth2

| 関数 | 引数 | 説明 |
|---|---|---|
| `OAuth2トークン交換(クライアントID, シークレット, コード, リダイレクトURI)` | 文字列×4 | 認可コードをトークンに交換 |
| `OAuth2トークンリフレッシュ(クライアントID, シークレット, リフレッシュトークン)` | 文字列×3 | トークンをリフレッシュ |
| `OAuth2トークン無効化(クライアントID, シークレット, トークン)` | 文字列×3 | トークンを無効化 |
| `OAuth2自分情報()` | — | 現在の認証情報を取得 |
| `OAuth2認可URL生成(クライアントID, リダイレクトURI, スコープ配列)` | 文字列×2, 配列 | 認可URLを生成 |

### シャーディング

| 関数 | 引数 | 説明 |
|---|---|---|
| `シャード設定(シャードID, シャード数)` | 数値×2 | シャーディングを設定 |
| `シャード情報()` | — | Gateway Bot情報を取得 |
| `シャードID計算(サーバーID, シャード数)` | 文字列, 数値 | 所属シャードIDを計算 |

### ユーティリティ <sup>v2.3</sup>

| 関数 | 引数 | 説明 |
|---|---|---|
| `Snowflakeタイムスタンプ(ID)` | 文字列 | Discord ID → Unix timestamp (ms) |
| `権限値(権限名)` | 文字列 | 権限名 → ビット値（日本語/英語対応） |
| `権限チェック(権限値, チェック対象)` | 数値×2 | 権限ビット判定（ADMINISTRATOR自動考慮） |
| `アプリ情報()` | — | 現在のアプリケーション情報 |

### ステータス・ユーザー

| 関数 | 引数 | 説明 |
|---|---|---|
| `ステータス設定(状態[, テキスト, 種類])` | 文字列×1-3 | Botステータスを設定 |
| `自分情報()` | — | Bot自身の情報を取得 |
| `ユーザー情報(ID)` | 文字列 | ユーザー情報を取得 |
| `DM作成(ユーザーID)` | 文字列 | DMチャンネルを作成 |
| `ログレベル設定(レベル)` | 文字列 | ログレベルを変更 |
| `インテント値(名前)` | 文字列 | インテント名→数値変換 |

---

## 📡 イベント一覧

`イベント(名前, コールバック)` で登録可能な全イベント:

### 基本イベント

| 日本語 | Discord Event | 説明 |
|---|---|---|
| `"準備完了"` | READY | Bot接続完了 |
| `"再接続完了"` | RESUMED | セッション再開完了 |
| `"エラー"` | — | REST/Gateway エラー |
| `"切断"` | — | Gateway 切断 |
| `"再接続"` | — | Gateway 再接続成功 |

### メッセージ

| 日本語 | Discord Event | 説明 |
|---|---|---|
| `"メッセージ受信"` | MESSAGE_CREATE | メッセージ受信 |
| `"メッセージ編集"` | MESSAGE_UPDATE | メッセージ編集 |
| `"メッセージ削除イベント"` | MESSAGE_DELETE | メッセージ削除 |
| `"メッセージ一括削除"` | MESSAGE_DELETE_BULK | メッセージ一括削除 <sup>v2.3</sup> |
| `"入力中"` | TYPING_START | 入力中 |

### メンバー

| 日本語 | Discord Event | 説明 |
|---|---|---|
| `"メンバー参加"` | GUILD_MEMBER_ADD | メンバー参加 |
| `"メンバー退出"` | GUILD_MEMBER_REMOVE | メンバー退出 |
| `"メンバー更新"` | GUILD_MEMBER_UPDATE | メンバー情報更新 <sup>v2.3</sup> |

### サーバー

| 日本語 | Discord Event | 説明 |
|---|---|---|
| `"サーバー参加"` | GUILD_CREATE | サーバーに参加 |
| `"サーバー退出"` | GUILD_DELETE | サーバーから退出 |
| `"サーバー更新"` | GUILD_UPDATE | サーバー設定変更 <sup>v2.3</sup> |
| `"BAN追加"` | GUILD_BAN_ADD | メンバーがBANされた <sup>v2.3</sup> |
| `"BAN削除"` | GUILD_BAN_REMOVE | BANが解除された <sup>v2.3</sup> |

### チャンネル・スレッド

| 日本語 | Discord Event | 説明 |
|---|---|---|
| `"チャンネル作成"` | CHANNEL_CREATE | チャンネル作成 |
| `"チャンネル更新"` | CHANNEL_UPDATE | チャンネル設定変更 <sup>v2.3</sup> |
| `"チャンネル削除"` | CHANNEL_DELETE | チャンネル削除 |
| `"ピン更新"` | CHANNEL_PINS_UPDATE | ピン留め変更 <sup>v2.3</sup> |
| `"スレッド作成"` | THREAD_CREATE | スレッド作成 <sup>v2.3</sup> |
| `"スレッド更新"` | THREAD_UPDATE | スレッド設定変更 <sup>v2.3</sup> |
| `"スレッド削除"` | THREAD_DELETE | スレッド削除 <sup>v2.3</sup> |
| `"スレッド同期"` | THREAD_LIST_SYNC | スレッド一覧同期 <sup>v2.3</sup> |

### ロール

| 日本語 | Discord Event | 説明 |
|---|---|---|
| `"ロール作成"` | GUILD_ROLE_CREATE | ロール作成 <sup>v2.3</sup> |
| `"ロール更新"` | GUILD_ROLE_UPDATE | ロール設定変更 <sup>v2.3</sup> |
| `"ロール削除"` | GUILD_ROLE_DELETE | ロール削除 <sup>v2.3</sup> |

### リアクション・招待

| 日本語 | Discord Event | 説明 |
|---|---|---|
| `"リアクション追加"` | MESSAGE_REACTION_ADD | リアクション追加 |
| `"リアクション削除"` | MESSAGE_REACTION_REMOVE | リアクション削除 |
| `"招待作成"` | INVITE_CREATE | 招待作成 <sup>v2.3</sup> |
| `"招待削除"` | INVITE_DELETE | 招待削除 <sup>v2.3</sup> |

### ボイス

| 日本語 | Discord Event | 説明 |
|---|---|---|
| `"ボイス状態更新"` | VOICE_STATE_UPDATE | ボイス状態変更 |
| `"ボイスサーバー更新"` | VOICE_SERVER_UPDATE | ボイスサーバー情報 |
| `"ボイス接続完了"` | — | VC接続完了 |
| `"ボイス切断"` | — | VC切断完了 |
| `"音声再生完了"` | — | 1曲再生完了 |

### その他

| 日本語 | Discord Event | 説明 |
|---|---|---|
| `"プレゼンス更新"` | PRESENCE_UPDATE | プレゼンス更新 |
| `"絵文字更新"` | GUILD_EMOJIS_UPDATE | 絵文字変更 <sup>v2.3</sup> |
| `"スタンプ更新"` | GUILD_STICKERS_UPDATE | スタンプ変更 <sup>v2.3</sup> |
| `"Webhook更新"` | WEBHOOKS_UPDATE | Webhook変更 <sup>v2.3</sup> |
| `"インテグレーション更新"` | GUILD_INTEGRATIONS_UPDATE | インテグレーション変更 <sup>v2.3</sup> |
| `"ステージ開始"` / `"ステージ更新"` / `"ステージ終了"` | STAGE_INSTANCE_* | ステージ変更 <sup>v2.3</sup> |
| `"自動モデレーション実行"` | AUTO_MODERATION_ACTION_EXECUTION | AutoMod発動 |
| `"自動モデレーションルール作成"` / `"更新"` / `"削除"` | AUTO_MODERATION_RULE_* | AutoModルール変更 <sup>v2.3</sup> |
| `"イベント作成"` / `"イベント更新"` / `"イベント削除"` | GUILD_SCHEDULED_EVENT_* | スケジュールイベント |
| `"イベント参加"` / `"イベント退出"` | GUILD_SCHEDULED_EVENT_USER_* | イベント参加者変更 <sup>v2.3</sup> |
| `"投票追加"` / `"投票削除"` | MESSAGE_POLL_VOTE_* | 投票変更 <sup>v2.3</sup> |
| `"エンタイトルメント作成"` / `"更新"` / `"削除"` | ENTITLEMENT_* | エンタイトルメント変更 <sup>v2.3</sup> |

> 英語のイベント名 (`MESSAGE_CREATE` 等) もそのまま使用できます。

---

## メッセージオブジェクトの構造

`メッセージ受信時` のコールバックに渡される辞書のキー:

```
{
  "ID": "1234567890...",
  "内容": "こんにちは",
  "チャンネルID": "1234567890...",
  "サーバーID": "1234567890...",
  "著者": {
    "ID": "1234567890...",
    "ユーザー名": "username",
    "表示名": "表示名",
    "アバター": "hash",
    "ボット": false
  },
  "タイムスタンプ": "2026-02-12T00:00:00.000Z",
  "メンション": [...],
  "埋め込み": [...],
  "添付ファイル": [...],
  "返信元": { ... } or null
}
```

> Discord API のキーは自動的に日本語に変換されます（約90種の翻訳テーブル）。

---

## 🧑‍🍳 レシピ集

### エコー Bot

```
ボット.メッセージ受信時(関数(m)
    もし m["著者"]["ボット"] != 真 なら
        ボット.返信(m, "あなた: " + m["内容"])
    終わり
終わり)
```

### ウェルカムメッセージ

```
変数 歓迎チャンネル = "1234567890123456789"

ボット.参加時(関数(メンバー)
    変数 名前 = メンバー["ユーザー"]["ユーザー名"]
    変数 e = ボット.埋め込み作成()
    ボット.埋め込みタイトル(e, "🎉 ようこそ！")
    ボット.埋め込み説明(e, 名前 + " さん、サーバーへようこそ！")
    ボット.埋め込み色(e, 0x57F287)
    ボット.埋め込み送信(歓迎チャンネル, e)
終わり)
```

### 投票機能

```
もし 内容 == "!vote" なら
    変数 結果 = ボット.メッセージ送信(チャンネル, "📊 今日のランチは？")
    もし 結果 != 偽 なら
        ボット.リアクション追加(チャンネル, 結果["ID"], "🍜")
        ボット.リアクション追加(チャンネル, 結果["ID"], "🍕")
        ボット.リアクション追加(チャンネル, 結果["ID"], "🍔")
    終わり
終わり
```

### 遅延応答（重い処理）

```
ボット.コマンド登録("analyze", "データを分析する", 関数(インタラクション)
    ボット.コマンド遅延応答(インタラクション)
    // 重い処理...
    ボット.コマンドフォローアップ(インタラクション, "分析完了！結果: ...")
終わり)
```

---

## ❓ FAQ

<details>
<summary><strong>Q: トークンはどこで取得できますか？</strong></summary>

[Discord Developer Portal](https://discord.com/developers/applications) → アプリケーション選択 → 左メニュー「Bot」→ 「Reset Token」でトークンをコピーできます。

⚠️ **トークンは絶対にコードに直接書かず、環境変数で管理することを推奨します。**
</details>

<details>
<summary><strong>Q: Message Content Intent を有効にする必要がありますか？</strong></summary>

はい。`メッセージ["内容"]` を読み取るには、Developer Portal の Bot 設定で **Message Content Intent** を ON にしてください。スラッシュコマンドのみ使用する場合は不要です。
</details>

<details>
<summary><strong>Q: スラッシュコマンドが表示されません</strong></summary>

スラッシュコマンドは Bot 起動時に Discord API に登録されます。反映まで **最大1時間** かかる場合があります。開発中はギルドコマンドの使用を検討してください。
</details>

<details>
<summary><strong>Q: Bot が切断されます</strong></summary>

自動再接続をサポートしています。Gateway 切断時は自動的に Resume/Reconnect を行います。

```
ボット.ログレベル設定("デバッグ")
```
</details>

<details>
<summary><strong>Q: レート制限は処理されますか？</strong></summary>

はい。REST API で 429 (Rate Limited) が返された場合、自動的に `retry_after` 秒待機してリトライします。
</details>

<details>
<summary><strong>Q: ボイスチャンネルに必要な追加ライブラリは？</strong></summary>

`libopus`, `libsodium` が必要です。MP3等の再生には `ffmpeg` も必要です。
macOS: `brew install opus libsodium ffmpeg`
Ubuntu: `sudo apt install libopus-dev libsodium-dev ffmpeg`
</details>

<details>
<summary><strong>Q: パッケージマネージャでインストールした場合、更新方法は？</strong></summary>

```bash
hajimu パッケージ 更新 ReoShiozawa/hajimu-discord
```
</details>

---

## インテント設定

```
// 文字列で指定
ボット.インテント設定("デフォルト")
ボット.インテント設定("メッセージ", "メッセージ内容", "リアクション")
ボット.インテント設定("全て") // ⚠️ 特権インテント含む

// 数値でも OK
ボット.インテント設定(32767)
```

| 名前 | 値 | 特権？ |
|---|---|---|
| `"サーバー"` | 1 | いいえ |
| `"メンバー"` | 2 | **はい** |
| `"モデレーション"` | 4 | いいえ |
| `"メッセージ"` | 512 | いいえ |
| `"メッセージ内容"` | 32768 | **はい** |
| `"リアクション"` | 1024 | いいえ |
| `"DM"` | 4096 | いいえ |
| `"プレゼンス"` | 256 | **はい** |
| `"ボイス"` | 128 | いいえ |
| `"デフォルト"` | 33280 | いいえ |
| `"全て"` | 262143 | **はい** |

> **特権インテント** は Developer Portal で有効にする必要があります。

---

## 📜 変更履歴

### v2.3.0 (2026-02-14)

**discord.js/discord.py 互換性強化** — +39関数、Gateway 40+種イベント対応

- **自動選択メニュー** (4関数): ユーザー / ロール / チャンネル / メンション可能
- **BAN管理拡張**: BAN一覧, BAN一括
- **メンバー管理拡張**: メンバー編集, ニックネーム変更
- **Webhook拡張**: 編集, 情報取得, メッセージ編集/削除
- **スレッド管理拡張**: アクティブ/アーカイブスレッド一覧, アーカイブ/ロック/ピン
- **アナウンスチャンネル**: クロスポスト, チャンネルフォロー
- **サーバー管理拡張**: プルーン確認/実行, サーバー削除/プレビュー, ウィジェット設定, バニティURL
- **チャンネル/ロール位置変更**: 並べ替え操作
- **リアクション拡張**: ユーザー一覧, 絵文字別全削除
- **コマンド管理**: 削除, 一覧, 権限設定
- **ユーティリティ**: Snowflakeタイムスタンプ, 権限値/チェック(日本語対応), アプリ情報, Voice地域一覧, ステッカーパック一覧
- **Gatewayイベント** 40種以上の日本語対応: CHANNEL_UPDATE, GUILD_BAN_ADD/REMOVE, GUILD_ROLE_*, GUILD_MEMBER_UPDATE, THREAD_*, INVITE_*, MESSAGE_DELETE_BULK, STAGE_INSTANCE_*, POLL_VOTE_*, ENTITLEMENT_*, AUTO_MODERATION_RULE_* 等
- 累計 252 関数

### v2.2.1 (2026-02-15)

**セキュリティ・バグ修正**

- JSONパーサー境界チェック, User-Agent統一, OAuth2メモリ安全性, pthread UB修正
- 音声停止ロジック修正, ffmpegコマンドインジェクション防止, シャード検証追加

### v2.2.0 (2026-02-14)

**Components V2・テンプレート・サウンドボード・OAuth2・シャーディング** — +42関数

- Components V2 (9), サーバーテンプレート (7), オンボーディング (2), サウンドボード (7)
- ロール接続メタデータ (4), エンタイトルメント/SKU (5), OAuth2 (5), シャーディング (3)
- 累計 213 関数

### v2.1.0 (2026-02-15)

**ステージ・スタンプ・Markdown拡張** — +33関数 (累計 171)

### v2.0.0 (2026-02-15)

**ボイスチャンネル対応** — +11関数 (累計 ~135)

### v1.7.x (2026-02-14)

**監査ログ・AutoMod・絵文字・イベント・投票** — +16関数 + セキュリティ修正

### v1.6.0 — v1.0.0

コレクター, Webhook, チャンネル管理, モーダル, コンポーネント, メッセージ操作, 初回リリース

---

## 📄 ライセンス

MIT License — 詳細は [LICENSE](LICENSE) を参照

---

<p align="center">
  <sub>はじむ言語で Discord Bot を作ろう 🤖</sub><br>
  <sub>252 関数 ・ 40+ イベント ・ 完全日本語 API</sub>
</p>
