# hajimu_discord ロードマップ

> hajimu_discord v1.0.0 → discord.js 完全対等を目指す開発計画

---

## 📊 現状の機能カバレッジ（v1.0.0）

### discord.js との機能比較サマリ

| カテゴリ | discord.js | hajimu_discord v1.0.0 | カバー率 |
|---|---|---|---|
| Bot管理 / Gateway | ✅ 完全 | ✅ 基本 | 70% |
| メッセージ送受信 | ✅ 完全 | ✅ 基本 | 50% |
| 埋め込み (Embed) | ✅ 完全 | ✅ 基本 | 75% |
| スラッシュコマンド | ✅ 完全 | ✅ 基本 | 40% |
| リアクション | ✅ 完全 | ⚠️ 一部 | 30% |
| ボタン / セレクトメニュー | ✅ 完全 | ❌ 未実装 | 0% |
| モーダル (Modal) | ✅ 完全 | ❌ 未実装 | 0% |
| スレッド / フォーラム | ✅ 完全 | ❌ 未実装 | 0% |
| ボイスチャンネル | ✅ (@discordjs/voice) | ❌ 未実装 | 0% |
| Webhook | ✅ 完全 | ❌ 未実装 | 0% |
| 監査ログ (Audit Log) | ✅ 完全 | ❌ 未実装 | 0% |
| AutoModeration | ✅ 完全 | ❌ 未実装 | 0% |
| スケジュールイベント | ✅ 完全 | ❌ 未実装 | 0% |
| 権限管理 | ✅ 完全 | ❌ 未実装 | 0% |
| 招待 (Invite) | ✅ 完全 | ❌ 未実装 | 0% |
| 絵文字 / スタンプ管理 | ✅ 完全 | ❌ 未実装 | 0% |
| チャンネル管理 (CRUD) | ✅ 完全 | ❌ 未実装 | 0% |
| シャーディング | ✅ 完全 | ❌ 未実装 | 0% |
| キャッシュ / コレクション | ✅ 完全 | ❌ 未実装 | 0% |
| ファイル添付 | ✅ 完全 | ❌ 未実装 | 0% |
| 投票 (Poll) | ✅ 完全 | ❌ 未実装 | 0% |
| エラーハンドリング | ✅ 完全 | ⚠️ 基本 | 25% |
| レート制限管理 | ✅ 完全 | ⚠️ 基本リトライ | 30% |

**全体カバレッジ: 約 15%**（55関数 / discord.js 300+クラス・関数）

---

## 🔴 v1.0.0 で不足している主要機能

### 1. メッセージコンポーネント（最重要）

discord.js では Bot のインタラクションの中核を担う機能群。

| 機能 | discord.js クラス | 優先度 |
|---|---|---|
| ボタン | `ButtonBuilder`, `ActionRowBuilder` | 🔴 最高 |
| セレクトメニュー（文字列） | `StringSelectMenuBuilder` | 🔴 最高 |
| セレクトメニュー（ユーザー） | `UserSelectMenuBuilder` | 🟡 高 |
| セレクトメニュー（ロール） | `RoleSelectMenuBuilder` | 🟡 高 |
| セレクトメニュー（チャンネル） | `ChannelSelectMenuBuilder` | 🟡 高 |
| セレクトメニュー（メンション可能） | `MentionableSelectMenuBuilder` | 🟡 高 |
| モーダル / テキスト入力 | `ModalBuilder`, `TextInputBuilder` | 🔴 最高 |
| コンポーネント V2 | `ContainerBuilder`, `SectionBuilder`, `SeparatorBuilder` | 🔵 低 |

### 2. メッセージ機能の拡張

| 機能 | discord.js | 優先度 |
|---|---|---|
| メッセージ編集 | `Message.edit()` | 🔴 最高 |
| メッセージ削除 | `Message.delete()` | 🔴 最高 |
| メッセージ一括削除 | `TextChannel.bulkDelete()` | 🟡 高 |
| メッセージピン | `Message.pin()` / `unpin()` | 🟡 高 |
| ファイル添付送信 | `AttachmentBuilder` | 🟡 高 |
| メッセージ取得（履歴） | `TextChannel.messages.fetch()` | 🟡 高 |
| リプライ（参照付き） | `Message.reply()` with reference | 🔴 最高 |
| メンション制御 | `AllowedMentionsBuilder` | 🟡 高 |

### 3. スラッシュコマンドの拡充

| 機能 | discord.js | 優先度 |
|---|---|---|
| サブコマンド | `ChatInputCommandSubcommandBuilder` | 🔴 最高 |
| サブコマンドグループ | `ChatInputCommandSubcommandGroupBuilder` | 🟡 高 |
| オートコンプリート | `AutocompleteInteraction` | 🟡 高 |
| コンテキストメニュー（右クリック） | `ContextMenuCommandBuilder` | 🟡 高 |
| コマンド権限 | `ApplicationCommandPermissionsManager` | 🟡 高 |
| 遅延応答の完全サポート | Deferred reply + followup | 🔴 最高 |
| エフェメラル応答 | Ephemeral messages | 🔴 最高 |

### 4. チャンネル管理

| 機能 | discord.js | 優先度 |
|---|---|---|
| チャンネル作成 | `GuildChannelManager.create()` | 🟡 高 |
| チャンネル編集 | `GuildChannel.edit()` | 🟡 高 |
| チャンネル削除 | `GuildChannel.delete()` | 🟡 高 |
| カテゴリ管理 | `CategoryChannel` | 🟡 高 |
| 権限オーバーライド | `PermissionOverwriteManager` | 🟡 高 |
| スレッド作成 / 管理 | `ThreadManager`, `ThreadChannel` | 🟡 高 |
| フォーラムチャンネル | `ForumChannel`, `GuildForumThreadManager` | 🔵 中 |

### 5. ボイスチャンネル

| 機能 | discord.js | 優先度 |
|---|---|---|
| VC接続 | `@discordjs/voice` JoinVoiceChannel | 🔵 中 |
| 音声再生 | AudioPlayer, AudioResource | 🔵 中 |
| 音声受信 | VoiceReceiver | 🔵 低 |
| ステージチャンネル | `StageChannel`, `StageInstanceManager` | 🔵 低 |

### 6. サーバー管理の拡張

| 機能 | discord.js | 優先度 |
|---|---|---|
| サーバー編集 | `Guild.edit()` | 🔵 中 |
| 絵文字管理 (CRUD) | `GuildEmojiManager` | 🔵 中 |
| スタンプ管理 | `GuildStickerManager` | 🔵 低 |
| サウンドボード | `GuildSoundboardSoundManager` | 🔵 低 |
| 招待管理 | `GuildInviteManager` | 🟡 高 |
| テンプレート | `GuildTemplate` | 🔵 低 |
| ウェルカム画面 | `WelcomeScreen` | 🔵 中 |
| オンボーディング | `GuildOnboarding` | 🔵 低 |

### 7. モデレーション / セキュリティ

| 機能 | discord.js | 優先度 |
|---|---|---|
| タイムアウト（通信無効化） | `GuildMember.timeout()` | 🔴 最高 |
| 監査ログ | `GuildAuditLogs` | 🟡 高 |
| AutoModeration ルール | `AutoModerationRule`, `AutoModerationRuleManager` | 🟡 高 |
| メッセージ一括削除 | Bulk Delete API | 🟡 高 |

### 8. Webhook

| 機能 | discord.js | 優先度 |
|---|---|---|
| Webhook 作成 | `TextChannel.createWebhook()` | 🟡 高 |
| Webhook 送信 | `Webhook.send()` | 🟡 高 |
| Webhook 編集 / 削除 | `Webhook.edit()` / `delete()` | 🔵 中 |

### 9. スケジュールイベント

| 機能 | discord.js | 優先度 |
|---|---|---|
| イベント作成 | `GuildScheduledEventManager.create()` | 🔵 中 |
| イベント編集 / 削除 | `edit()` / `delete()` | 🔵 中 |
| 参加者管理 | `fetchSubscribers()` | 🔵 低 |

### 10. 投票 (Poll)

| 機能 | discord.js | 優先度 |
|---|---|---|
| 投票作成 | `PollBuilder` | 🔵 中 |
| 投票結果取得 | `Poll.answers` / `fetchVoters()` | 🔵 中 |

### 11. インフラ / アーキテクチャ

| 機能 | discord.js | 優先度 |
|---|---|---|
| シャーディング | `ShardingManager` | 🔵 中 |
| キャッシュシステム | `Collection`, managers with cache | 🟡 高 |
| イベントコレクター | `MessageCollector`, `ReactionCollector`, `InteractionCollector` | 🔴 最高 |
| 完全なレート制限管理 | Per-route rate limit, bucket system | 🟡 高 |
| 詳細なエラーハンドリング | `DiscordAPIError`, typed errors | 🟡 高 |
| Partial オブジェクト | Partial message/reaction/channel support | 🔵 中 |

---

## 📅 リリースロードマップ

### v1.1.0 — メッセージ操作の完全化（2026年2月実装済）

**テーマ: 基本操作の強化**

- [x] メッセージ編集 `ボット.メッセージ編集(チャンネルID, メッセージID, 新しい内容)`
- [x] メッセージ削除 `ボット.メッセージ削除(チャンネルID, メッセージID)`
- [x] メッセージ一括削除 `ボット.メッセージ一括削除(チャンネルID, 件数)`
- [x] メッセージ取得 `ボット.メッセージ取得(チャンネルID, メッセージID)`
- [x] メッセージ履歴 `ボット.メッセージ履歴(チャンネルID, 件数)`
- [x] メッセージピン / ピン解除 `ボット.ピン(チャンネルID, メッセージID)`
- [x] リプライ（参照付き） `ボット.リプライ(メッセージ, 内容)`
- [x] リアクション削除 `ボット.リアクション削除(チャンネルID, メッセージID, 絵文字)`
- [x] リアクション全削除 `ボット.リアクション全削除(チャンネルID, メッセージID)`
- [x] タイムアウト `ボット.タイムアウト(サーバーID, ユーザーID, 秒数)`
- [x] エラーイベント `ボット.エラー時(関数(エラー): ... 終わり)`
- [x] 切断イベント `ボット.切断時(関数(): ... 終わり)`

**新規関数: +12** ✅

---

### v1.2.0 — メッセージコンポーネント（2026年2月実装済）

**テーマ: インタラクティブ UI**

- [x] ボタン作成 `ボット.ボタン作成(ラベル, スタイル, カスタムID)`
- [x] ボタン行作成 `ボット.アクション行作成()`
- [x] ボタン行にボタン追加 `ボット.行にボタン追加(行, ボタン)`
- [x] コンポーネント付きメッセージ送信 `ボット.コンポーネント送信(チャンネルID, テキスト, 行配列)`
- [x] ボタンクリック時イベント `ボット.ボタン時(カスタムID, 関数(インタラクション): ... 終わり)`
- [x] セレクトメニュー作成 `ボット.セレクトメニュー作成(カスタムID, プレースホルダー)`
- [x] セレクトメニュー選択肢追加 `ボット.メニュー選択肢(メニュー, ラベル, 値, 説明)`
- [x] セレクトメニュー選択時イベント `ボット.セレクト時(カスタムID, 関数(インタラクション): ... 終わり)`
- [x] インタラクション更新 `ボット.インタラクション更新(インタラクション, 内容)`
- [x] エフェメラル応答 `ボット.コマンド応答(インタラクション, 内容, 真)`（第3引数=エフェメラル）
- [x] 遅延応答 `ボット.コマンド遅延応答(インタラクション)`
- [x] フォローアップ `ボット.コマンドフォローアップ(インタラクション, 内容)`

**新規関数: +13 | 累計: ~80** ✅

---

### v1.3.0 — モーダル & 高度なコマンド（2026年2月実装済）

**テーマ: フォームとコマンド構造の充実**

- [x] モーダル作成 `ボット.モーダル作成(カスタムID, タイトル)`
- [x] テキスト入力追加 `ボット.テキスト入力追加(モーダル, ラベル, カスタムID, スタイル)`
- [x] モーダル表示 `ボット.モーダル表示(インタラクション, モーダル)`
- [x] モーダル送信時イベント `ボット.モーダル送信時(カスタムID, 関数(インタラクション): ... 終わり)`
- [x] サブコマンド登録 `ボット.サブコマンド追加(コマンド名, サブ名, 説明, 関数)`
- [x] サブコマンドグループ `ボット.サブコマンドグループ追加(コマンド名, グループ名, 説明)`
- [x] オートコンプリート `ボット.オートコンプリート時(コマンド名, 関数(インタラクション): ... 終わり)`
- [x] コンテキストメニュー（ユーザー） `ボット.ユーザーメニュー登録(名前, 関数)`
- [x] コンテキストメニュー（メッセージ） `ボット.メッセージメニュー登録(名前, 関数)`
- [x] コマンドオプション: 選択肢 `ボット.コマンド選択肢(オプション, 名前, 値)`

**新規関数: +11 | 累計: ~89** ✅

---

### v1.4.0 — チャンネル & スレッド管理（2026年6月予定）

**テーマ: サーバー構造操作**

- [ ] チャンネル作成 `ボット.チャンネル作成(サーバーID, 名前, 種類)`
- [ ] チャンネル編集 `ボット.チャンネル編集(チャンネルID, 設定)`
- [ ] チャンネル削除 `ボット.チャンネル削除(チャンネルID)`
- [ ] チャンネル一覧 `ボット.チャンネル一覧(サーバーID)`
- [ ] スレッド作成 `ボット.スレッド作成(チャンネルID, 名前, 自動アーカイブ時間)`
- [ ] スレッド参加 / 退出 `ボット.スレッド参加(スレッドID)`
- [ ] スレッドメンバー管理 `ボット.スレッドメンバー追加(スレッドID, ユーザーID)`
- [ ] 権限オーバーライド設定 `ボット.権限設定(チャンネルID, 対象ID, 許可, 拒否)`
- [ ] 招待作成 `ボット.招待作成(チャンネルID, 設定)`
- [ ] 招待一覧 `ボット.招待一覧(サーバーID)`

**新規関数: +10 | 累計: ~99**

---

### v1.5.0 — Webhook & ファイル添付（2026年7月予定）

**テーマ: 外部連携と添付ファイル**

- [ ] Webhook 作成 `ボット.Webhook作成(チャンネルID, 名前)`
- [ ] Webhook 送信 `ボット.Webhook送信(WebhookURL, 内容)`
- [ ] Webhook 送信（カスタム名・アバター） `ボット.Webhook送信(URL, 内容, 名前, アバターURL)`
- [ ] Webhook 削除 `ボット.Webhook削除(WebhookID)`
- [ ] ファイル添付送信 `ボット.ファイル送信(チャンネルID, ファイルパス, コメント)`
- [ ] 埋め込み画像（URL指定） `ボット.埋め込み画像(埋め込み, URL)`
- [ ] 埋め込みサムネイル `ボット.埋め込みサムネイル(埋め込み, URL)`

**新規関数: +7 | 累計: ~106**

---

### v1.6.0 — コレクター & キャッシュ（2026年8月予定）

**テーマ: イベント駆動の高度なパターン**

- [ ] メッセージコレクター `ボット.メッセージ収集(チャンネルID, フィルタ, タイムアウト)`
- [ ] リアクションコレクター `ボット.リアクション収集(メッセージ, フィルタ, タイムアウト)`
- [ ] インタラクションコレクター `ボット.インタラクション収集(メッセージ, フィルタ, タイムアウト)`
- [ ] メンバーキャッシュ `ボット.メンバー取得(サーバーID, ユーザーID)`
- [ ] メンバー一覧取得 `ボット.メンバー一覧(サーバーID)`
- [ ] メンバー検索 `ボット.メンバー検索(サーバーID, クエリ)`
- [ ] サーバー一覧 `ボット.サーバー一覧()`
- [ ] 完全なレート制限管理（バケットシステム）

**新規関数: +7 | 累計: ~113**

---

### v1.7.0 — 監査ログ & AutoModeration（2026年9月予定）

**テーマ: モデレーション強化**

- [ ] 監査ログ取得 `ボット.監査ログ(サーバーID, 種類, 件数)`
- [ ] AutoMod ルール作成 `ボット.AutoModルール作成(サーバーID, 設定)`
- [ ] AutoMod ルール編集 / 削除
- [ ] AutoMod イベント `ボット.AutoMod実行時(関数(データ): ... 終わり)`
- [ ] 絵文字一覧 `ボット.絵文字一覧(サーバーID)`
- [ ] 絵文字作成 `ボット.絵文字作成(サーバーID, 名前, 画像パス)`
- [ ] 絵文字削除 `ボット.絵文字削除(サーバーID, 絵文字ID)`
- [ ] スケジュールイベント作成 `ボット.イベント作成(サーバーID, 名前, 開始, 終了, 説明)`
- [ ] スケジュールイベント編集 / 削除
- [ ] 投票作成 `ボット.投票作成(チャンネルID, 質問, 選択肢配列, 時間)`

**新規関数: +10 | 累計: ~123**

---

### v2.0.0 — ボイスチャンネル & シャーディング（2026年Q4予定）

**テーマ: 大規模Bot対応**

- [ ] VC接続 `ボット.VC接続(サーバーID, チャンネルID)`
- [ ] VC切断 `ボット.VC切断(サーバーID)`
- [ ] 音声再生（URL / ファイル） `ボット.音声再生(サーバーID, ソース)`
- [ ] 音声停止 / 一時停止 / 再開
- [ ] 音声キュー管理
- [ ] ステージチャンネル管理
- [ ] シャーディング対応（大規模サーバー向け）
- [ ] プロセス間通信 / メッセージブロードキャスト

**新規関数: +8 | 累計: ~131**

---

### v2.1.0+ — 完全対等を目指して（2027年〜）

- [ ] Components V2（Container, Section, Separator, MediaGallery）
- [ ] サーバーテンプレート
- [ ] ウェルカム画面管理
- [ ] オンボーディング設定
- [ ] スタンプ管理
- [ ] サウンドボード
- [ ] ロール接続メタデータ (Linked Roles)
- [ ] エンタイトルメント / SKU（マネタイズ）
- [ ] OAuth2 フロー対応
- [ ] Markdown ユーティリティ関数（太字、斜体、コードブロック等）

---

## 🎯 マイルストーン目標

| バージョン | 関数数 | カバレッジ | 目標 |
|---|---|---|---|
| **v1.0.0** (現在) | 55 | ~15% | 基本的なBot構築 |
| **v1.2.0** | ~79 | ~35% | インタラクティブBot |
| **v1.5.0** | ~106 | ~55% | 実用的な中規模Bot |
| **v1.7.0** | ~123 | ~70% | モデレーションBot完全対応 |
| **v2.0.0** | ~131 | ~80% | 音楽Bot・大規模対応 |
| **v2.1.0+** | ~150+ | ~95% | discord.js 完全対等 |

---

## 📋 優先度の定義

| 記号 | 意味 | 基準 |
|---|---|---|
| 🔴 最高 | 次のリリースで必須 | discord.js の基本的な Bot で99%使う機能 |
| 🟡 高 | 近いうちに実装 | 中規模以上の Bot で頻繁に使う機能 |
| 🔵 中〜低 | 将来実装 | 特定ユースケースや大規模Bot向け |

---

## 💡 設計方針

1. **完全日本語API** — すべての関数名・引数名・イベント名を日本語で統一
2. **discord.js との概念対応** — discord.js ユーザーが移行しやすい API 設計
3. **シンプル重視** — discord.js のマネージャーパターンではなく、フラットな関数呼び出し
4. **段階的リリース** — 各バージョンで実用的なBotが1つ増える程度の機能追加
5. **後方互換性** — v1.x 内では既存APIを破壊しない

---

## 🔗 関連リンク

- [hajimu_discord リポジトリ](https://github.com/ReoShiozawa/hajimu_discord)
- [はじむ言語 リポジトリ](https://github.com/ReoShiozawa/hajimu)  
- [Discord API ドキュメント](https://discord.com/developers/docs)
- [discord.js ドキュメント](https://discord.js.org/)

---

*最終更新: 2026年2月14日*
